# Server
# Port the HTTP API listens on
PORT=4000
# Runtime environment (development/production/test)
NODE_ENV=development
# Comma-separated list of allowed origins (required in production)
CORS_ALLOWED_ORIGINS=https://app.greenbro.co.za

# Optional version string exposed on /health-plus
APP_VERSION=1.0.0

# Database
# Postgres connection string
DATABASE_URL=postgres://USER:PASS@HOST:5432/greenbro_dev

# Auth
# Secret used to sign JWTs; use a long random string in production
JWT_SECRET=replace-with-a-long-random-string
# Allow public signup via /auth/signup (defaults to false)
AUTH_ALLOW_PUBLIC_SIGNUP=false

# MQTT telemetry ingest
# MQTT broker URL for telemetry ingest
MQTT_URL=mqtt://broker-host:1883
# MQTT username for telemetry ingest
MQTT_USERNAME=your-mqtt-username
# MQTT password for telemetry ingest
MQTT_PASSWORD=your-mqtt-password

# Alerts worker thresholds
# Minutes offline before triggering an offline alert
ALERT_OFFLINE_MINUTES=10
# Minutes offline before upgrading an offline alert to critical
ALERT_OFFLINE_CRITICAL_MINUTES=60
# Temperature threshold that triggers a high-temp alert
ALERT_HIGH_TEMP_THRESHOLD=60
# Polling interval (seconds) for the alerts worker
ALERT_WORKER_INTERVAL_SEC=60

# Telemetry HTTP ingest (optional, if pushing telemetry over HTTPS)
# API key required in the x-api-key header for /telemetry/http
TELEMETRY_API_KEY=replace-with-api-key

# Control/commands HTTP endpoint (optional)
# Base URL for control/commands provider
CONTROL_API_URL=https://partner-control-api.example.com
# API key for control/commands provider
CONTROL_API_KEY=replace-with-api-key

# Expo push integration
# Access token for Expo push notifications (optional)
EXPO_ACCESS_TOKEN=replace-with-expo-access-token-or-leave-empty
# Enable sending a small sample push on /health-plus (false by default)
PUSH_HEALTHCHECK_ENABLED=false
# Optional override token for health push (otherwise uses most recent token)
PUSH_HEALTHCHECK_TOKEN=
# Minutes between health-check push attempts
PUSH_HEALTHCHECK_INTERVAL_MINUTES=30
